@model StaffWeb.Models.DoctorAppointmentViewModel
@{
    ViewData["Title"] = "Lich kham hom nay";
}

<section class="card">
    <h1 class="page-title">Lich kham hom nay</h1>
    <p class="page-subtitle">Chon lich kham de bat dau kham benh.</p>

    <form method="get" class="form-row" style="margin-bottom: 16px;">
        <div>
            <label>Ngay</label>
            <input name="date" type="date" value="@Model.Date.ToString("yyyy-MM-dd")" />
        </div>
        <div style="align-self:end;">
            <button type="submit" class="btn btn-secondary">Xem lich</button>
        </div>
    </form>

    <div class="card" style="margin-bottom: 16px;">
        <h3>Dang cho kham</h3>
        @if (Model.Pending.Count == 0)
        {
            <div class="muted">Hom nay khong co lich dang cho.</div>
        }
        else
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>Gio</th>
                        <th>Thu cung</th>
                        <th>Dich vu</th>
                        <th>Ghi chu</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var item in Model.Pending)
                {
                    <tr>
                        <td>@item.VisitTime.ToString("HH:mm")</td>
                        <td>@item.PetName (@item.PetId)</td>
                        <td>@item.ServiceName</td>
                        <td>@item.Notes</td>
                        <td>
                            <a class="btn"
                               asp-area="Doctor"
                               asp-controller="Records"
                               asp-action="FromAppointment"
                               asp-route-petId="@item.PetId"
                               asp-route-serviceId="@item.ServiceId"
                               asp-route-visitTicks="@item.VisitTime.Ticks">
                                Bat dau kham
                            </a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>

    <div class="card">
        <h3>Tat ca lich kham trong ngay</h3>
        @if (Model.All.Count == 0)
        {
            <div class="muted">Hom nay chua co lich kham nao.</div>
        }
        else
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>Gio</th>
                        <th>Thu cung</th>
                        <th>Dich vu</th>
                        <th>Trang thai</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var item in Model.All)
                {
                    <tr>
                        <td>@item.VisitTime.ToString("HH:mm")</td>
                        <td>@item.PetName (@item.PetId)</td>
                        <td>@item.ServiceName</td>
                        <td>@(item.IsPending ? "Dang cho" : "Da kham")</td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>
</section>
